{{ define "heading" }}
<div class="jumbotron">
    <h1 class="display-4">{{ .Title }}</h1>
    {{ with .Params.subtitle }}<p class="lead">{{ . }}</p>{{ end }}
</div>
{{ end }}

{{ define "main" }}

<!-- Render the main page content -->
<section id="software-content">
{{ .Content }}
</section>

<!-- Fetch software properties -->
{{ $data := index .Site.Data.software.items (urlize .Title) }}
{{ $page := . }}

<!-- Downloads -->
{{ if $data.downloads }}
<section id="software-downloads">
    <!-- TODO -->
</section>
{{ end }}

<!-- Documentation -->
{{ with $data.fullDocsUrl }}
<section id="software-docs">
    <h2>{{ T "docs" }}</h2>
    <p>{{ T "fullDocsAvail" }} <a href="{{ . }}">{{ T "viaThisLink" }}</a>.</p>
</section>
{{ end }}

<!-- License -->
{{ with $data.license }}
<section id="software-license">
    <h2>{{ T "license" }}</h2>
    {{ partial (printf "software/license/%s.%s.html" . $.Site.Language) }}
</section>
{{ end }}

<!-- Support -->
{{ with $data.githubUrl }}
<section id="software-support">
    <h2>{{ T "support" }}</h2>
    <div class="list-group">
        <a class="list-group-item list-group-item-action" href="{{ . }}"><i class="fab fa-github"></i> {{ T "githubIssueTrk" }}</a>
    </div>
</section>
{{ end }}

<!-- Source code -->
{{ with $data.githubUrl }}
<section id="software-source">
    <h2>{{ T "sourceCode" }}</h2>
    <p>{{ T "sourceCodeClone" }} <a href="{{ . }}">{{ T "githubRepo" }}</a>:</p>
    <pre><code>git clone {{ . }}.git</code></pre>
</section>
{{ end }}

<!-- See also -->
{{ $related := .Site.RegularPages.Related . }}
{{ if or .Params.seeAlso $related }}
<section id="software-see-also">
    <h2>{{ T "seeAlso" }}</h2>
    <ul>
        {{ range .Params.seeAlso }}<li><a href="{{ .url }}">{{ .name }}</a></li>{{ end }}
        {{ with $related }}
        <li><b>{{ T "blogPosts" }}:</b>
            <ul class="list-unstyled">
                {{ range . }}<li>{{ partial "blog/post_link.html" (dict "page" $page "post" .) }}</li>{{ end }}
            </ul>
        </li>
        {{ end }}
    </ul>
</section>
{{ end }}

{{ end }}
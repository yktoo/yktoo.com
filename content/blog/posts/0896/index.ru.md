---
type: post
date: "2024-10-25T11:11:20+02:00"
title: "3.11.0 Enniskillen"
tags:
    - Comentario
    - веб
    - софт
    - разработка
    - релиз
    - Go
    - Angular
image: "https://res.cloudinary.com/yktoo/image/upload/v1729847452/blog/ga9qrqmkyfndr4lkirf4.jpg"
imageCredit: "Изображение: кибермозг."
series: comentario
software: comentario
---

Вышла новая версия [Comentario 3.11.0 Enniskillen](https://gitlab.com/comentario/comentario/-/releases/v3.11.0).

[Comentario](/software/comentario) — это быстрый и мощный свободный сервер комментариев для веб-страниц, написанный на {{< fl "Go" >}}.

{{< imgfig "https://res.cloudinary.com/yktoo/image/upload/v1729847452/blog/ga9qrqmkyfndr4lkirf4.jpg" "Изображение: кибермозг." >}}

> <i class="fas fa-info-circle"></i> Вы можете подписаться на новости {{< fl "Comentario" >}} в [соответствующем блоге](/series/comentario) или через {{< rss-permalink "/series/comentario" "RSS" >}}.

## Что нового

<!--more-->

### Дашборд и статистика домена

Наиболее заметным изменением в данном релизе является расширенная статистика в Дашборде и на странице статистики домена.

В обоих появились круговые диаграммы, показывающие разбивку просмотров по *странам*, *типам устройств*, *браузерам* и *ОС*:

{{< imgfig "https://res.cloudinary.com/yktoo/image/upload/v1729849646/blog/ebtpkk7adibj3rhejve8.png" "Диаграммы статистики просмотров." "border shadow" >}}

Также добавлен раздел {{< fl "Top performing pages" >}}, в котором отображаются списки из пяти страниц с наибольшим количеством просмотров и комментариев:

{{< imgfig "https://res.cloudinary.com/yktoo/image/upload/v1729849646/blog/uvj6vnizsxvr6l1dytko.png" "Страницы с наибольшим количеством просмотров и комментариев." "border shadow" >}}

Если кликнуть по странице из списка, то попадаешь сразу на соответствующую страницу свойств.

Данные в диаграммах подсчитываются за тот же период, что и в графиках по дням: за последние **30** дней. При этом Дашборд показывает информацию по всем доменам пользователя, а статистика домена — только по нему одному.

### Редактор комментариев

Не обойдён вниманием и встраиваемый {{< fl "Comentario" >}}. Так, в редакторе комментариев теперь можно использовать сочетания клавиш:

{{< imgfig "https://res.cloudinary.com/yktoo/image/upload/v1729850383/blog/tnokqflqibnkbutebbmv.png" "Комбинации клавиш  в редакторе комментов." "border shadow" >}}

Например, текст можно выделить **жирным** при помощи <kbd>Ctrl</kbd><kbd>B</kbd>, а *курсивом* — нажав <kbd>Ctrl</kbd><kbd>I</kbd>. Полный же список сочетаний клавиш доступен на странице [документации по редактору](https://docs.comentario.app/en/kb/comment-editor/).

Кроме того, на Маке в сочетаниях теперь вместо {{< fl "Ctrl" >}} используется клавиша <kbd>Cmd</kbd> (она же <kbd>⌘</kbd>). Например, формы на нём также будут отправляться по нажатию <kbd>⌘</kbd><kbd>Enter</kbd>.

### Чёткие аватары

Аватары в {{< fl "Comentario" >}} на экранах высокого разрешения (таких как {{< fl "Retina display" >}}) теперь отображаются с двойной плотностью пикселов ([#123](https://gitlab.com/comentario/comentario/-/issues/123)). Благодаря этому они выглядят заметно чётче:

{{< imgfig "https://res.cloudinary.com/yktoo/image/upload/v1729851658/blog/cpqm2ti2aqdfjpobkbdv.png" "Аватары до и после применения апскейла." "border" >}}

Такой же подход применяется и к аватарам в админке ({{< fl "Administration UI" >}}).

### Comentario в подкаталоге домена

Бэкенд теперь поддерживает установку {{< fl "Comentario" >}} не только в корне домена, но и в подкаталоге, например, `https://example.com/comentario/`, что расширяет возможности самостоятельного его хостинга ([#126](https://gitlab.com/comentario/comentario/-/issues/126)).

### Исправление импорта пользователей

В данной версии поправлен баг с [импортом домена](https://docs.comentario.app/en/installation/migration/), из-за которого все импортированные пользователи помечались как авторизуемые через {{< fl "Single Sign-On" >}} ({{< fl "SSO" >}}; [#133](https://gitlab.com/comentario/comentario/-/issues/133)).

### Верификация адреса отправителя

Если в {{< fl "Comentario" >}} настроена отправка емэйлов через {{< fl "SMTP" >}}-сервер, валидность адреса в поле {{< fl "From" >}} (отправитель служебных сообщений системы) будет проверяться в момент запуска. Этот адрес должен соответствовать правилам, описанным в {{< fl "RFC 5322" >}}. Вот пример допустимого адреса: `Comentario <noreply@example.com>` ([#129](https://gitlab.com/comentario/comentario/-/issues/129)).

Благодаря этому неверная конфигурация будет обнаружена ещё при запуске сервера, а не в момент первой попытки отправки емэйла; к тому же проблему можно было обнаружить лишь в логах сервера.

### Прочие изменения

* Админка: исправлено отображение флага {{< fl "SSO" >}} в свойствах пользователя
* Админка: исправлен файл веб-манифеста
* Локализация: добавлен французский язык
* Бэкенд: исправлен баг обновления {{< fl "XSRF" >}}-токена ([#130](https://gitlab.com/comentario/comentario/-/issues/130))
* Бэкенд: рефакторинг кода БД на использование {{< fl "ORM" >}}
* Документация: обновление {{< fl "README" >}}
* Документация: добавлена справка по редактору комментариев
* Документация: исправлено дефолтное значение `--email-from=` ([#129](https://gitlab.com/comentario/comentario/-/issues/129))
* {{< fl "CI" >}}: добавлен `go vet`
* {{< fl "CI" >}}: емэйлы на демо-сайте теперь отправляются с домена `@comentario.app`

### Улучшения демо-сайта

[Демонстрационный сайт](https://demo.comentario.app/) теперь доступен на большем количестве языков:

{{< imgfig "https://res.cloudinary.com/yktoo/image/upload/v1729853358/blog/lqfmnpl1lab2faleikvo.png" "Выбор языка демо-сайта." >}}

{{< include-file "/blog/_snippets/_comentario-footer.ru.md" >}}
